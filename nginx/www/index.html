<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1"> <!--, shrink-to-fit=no-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
	
	<!-- Font Awesome -->
	<link href="css/fontawesome.min.css" rel="stylesheet">
	<link href="css/fontawesome.solid.min.css" rel="stylesheet">
	
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
	
    <!-- Chrome, Opera, and Firefox OS -->
    <meta name="theme-color" content="#272727"/>
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#272727"/>
	
	<link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="theme-color" content="#ffffff">

    <title>Media services</title>
	<style>
	body {
		min-width:400px;
	}
	.navbar {
		padding: 0;
	}
	.navbar .navbar-brand {
		margin-right: .7rem;
	}
	.navbar .nav-link {
		padding: 0.8rem 0.7rem;
	}
	.navbar .nav-item.active .nav-link {
		border-bottom: 0.2rem solid white;
		padding-bottom: 0.6rem;
	}
	.navbar-collapse > .navbar-nav:first-child .nav-item:last-child > .nav-link {
		padding-right:0;
	}
	.embed-responsive {
		position: inherit;
		width:100%;
		height: 0;
		padding-top: 56.25%;
	}
	.embed-responsive .embed-responsive-item {
		position: absolute;
		left: 0;
		top: 3.1rem;
		padding-bottom: 3.1rem;
		width: 100%;
		height: 100%;
		display: none;
		min-width: 400px;
	}
	.embed-responsive .embed-responsive-item.active {
		display: block;
	}
	.dropdown-item.active, .dropdown-item:active {
		background-color: #49494a;
	}
	</style>
  </head>
  <body style="overflow-y: hidden;">
	<nav class="navbar fixed-top navbar-dark bg-dark navbar-expand">
	  <a class="navbar-brand" href="#"></a>

	  <div class="collapse navbar-collapse">
		<ul class="navbar-nav mr-auto">
		  <li class="nav-item pr-2">
			<a class="nav-link" href="#transmission" data-href=":9091/" title="Downloads (Transmission)">
				<i class="fas fa-download"></i>
			</a>
		  </li>
		  <li class="nav-item pl-2 pr-2">
			<a class="nav-link" href="#filebrowser" data-href=":5082/" title="Filebrowser">
			<i class="fas fa-folder"></i>
			</a>
		  </li>
		  <li class="nav-item pl-2 pr-2 active">
			<a class="nav-link" href="#plex" data-href=":32400/web" title="Plex">
				<i class="fas fa-play"></i>
				<div class="d-inline-block"><span class="d-none d-sm-block ml-1">Plex</span></div>
			</a>
		  </li>
		  <li class="nav-item pl-2 pr-2">
			<a class="nav-link" href="#sonarr" data-href=":8989/" title="Shows (Sonarr)">
				<i class="fas fa-tv"></i>
				<div class="d-inline-block"><span class="d-none d-sm-block ml-1">Shows</span></div>
			</a>
		  </li>
		  <li class="nav-item pl-2 pr-2">
			<a class="nav-link" href="#radarr" data-href=":7878/" title="Movies (Radarr)">
				<i class="fas fa-film"></i>
				<div class="d-inline-block"><span class="d-none d-sm-block ml-1">Movies</span></div>
			</a>
		  </li>
		  <li class="nav-item pl-2">
			<a class="nav-link" href="#bazarr" data-href=":6767/" title="Subtitles (Bazarr)">
				<i class="fas fa-closed-captioning"></i>
				<div class="d-inline-block"><span class="d-none d-sm-block ml-1">Subtitles</span></div>
			</a>
		  </li>
		</ul>
		
		<ul class="navbar-nav">
		  <li class="nav-item">
			<a class="nav-link nav-link-refresh" href="#" title="Refresh">
				<i class="fas fa-sync-alt"></i>
			</a>
		  </li>
		  <li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  <i class="fas fa-bars"></i>
			</a>
			<div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">		  
			  <a class="dropdown-item" href="#serviio" data-href=":23423/console" title="Serviio">Serviio</a>
			  <a class="dropdown-item" href="#jackett" data-href=":9117/" title="Jackett">Jackett</a>
			  <a class="dropdown-item" href="#traktarr" data-href="/storage/traktarr.log#end" title="Jackett">Traktarr log</a>
			</div>
		  </li>
		</ul>
	  </div>
	</nav>
	
	<div class="embed-responsive embed-responsive-16by9">
		<iframe id="frame-plex" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-sonarr" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-radarr" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-bazarr" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-transmission" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-filebrowser" frameborder="0" class="embed-responsive-item"></iframe>
		
		<iframe id="frame-serviio" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-jackett" frameborder="0" class="embed-responsive-item"></iframe>
		<iframe id="frame-traktarr" frameborder="0" class="embed-responsive-item"></iframe>
	</div>
	
	<script src="js/jquery-3.4.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript">
	$(function(){
		$(window).on('hashchange', function(e){
			var type = window.location.hash.substr(1);
			if (type) {
				var link = $('.nav-link[href="#'+ type +'"],.dropdown-item[href="#'+ type +'"]');
				var iframe = $('iframe[id="frame-'+ type +'"]');
				
				$(".nav-item.active,.dropdown-item.active").removeClass('active');
				if($(link).hasClass('dropdown-item'))
					$(link).addClass('active');
				else 
					$(link).parent('.nav-item').addClass('active');
				
				$(".embed-responsive .embed-responsive-item").removeClass('active');
				
				if (!$(iframe).attr('src')){
					$(iframe).attr('src', window.location.protocol + '//' + window.location.hostname + link.data('href'))
				}
				$(iframe).addClass('active');
			}
		});
		
		$('#frame-traktarr').on('load', function() {
			setTimeout(function(){
				var $contents = $('#frame-traktarr').contents();
				$contents.scrollTop($contents.height());
				
				// Auto Refresh
				setTimeout(function(){
					document.getElementById('frame-traktarr').contentWindow.location.reload();
				}, 10000)
			}, 0)
		});
		
		$('.nav-link-refresh').on('click', function(e) {
			e.preventDefault();

			var link = $('ul.navbar-nav>li.active').find('a');
			var iframe = $('iframe[id="frame-'+ link.attr('href').replace(/^#/, '') +'"]');
			$(iframe).attr('src', window.location.protocol + '//' + window.location.hostname + link.data('href'))
			$(iframe).addClass('active');
		});
		
		var hashtag = window.location.hash.substr(1);
		if (hashtag != '') {
			$(window).trigger('hashchange');
		} else {
			var link = $('ul.navbar-nav>li.active').find('a');
			var iframe = $('iframe[id="frame-'+ link.attr('href').replace(/^#/, '') +'"]');
			$(iframe).attr('src', window.location.protocol + '//' + window.location.hostname + link.data('href'))
			$(iframe).addClass('active');
		}
	});
	</script>
  </body>
</html>